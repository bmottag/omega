$( document ).ready( function () {

	$("#btnSubmitCheckOut").click(function(){		
			//Activa icono guardando
			$('#btnSubmitCheckOut').attr('disabled','-1');
			$("#div_error").css("display", "none");
			$("#div_load").css("display", "inline");
		
			$.ajax({
				type: "POST",	
				url: base_url + "jobs/save_fire_watch_checkout",	
				data: $("#formCheckout").serialize(),
				dataType: "json",
				contentType: "application/x-www-form-urlencoded;charset=UTF-8",
				cache: false,
				
				success: function(data){
										
					if( data.result == "error" )
					{
						$("#div_load").css("display", "none");
						$('#btnSubmitCheckOut').removeAttr('disabled');							
						return false;
					} 

					if( data.result )//true
					{	                                                        
						$("#div_load").css("display", "none");
						$('#btnSubmitCheckOut').removeAttr('disabled');

						var url = base_url + "jobs/fire_watch_checkin/" + data.idCheckin;
						$(location).attr("href", url);
					}
					else
					{
						alert('Error. Reload the web page.');
						$("#div_load").css("display", "none");
						$("#div_error").css("display", "inline");
						$('#btnSubmitCheckOut').removeAttr('disabled');
					}	
				},
				error: function(result) {
					alert('Error. Reload the web page.');
					$("#div_load").css("display", "none");
					$("#div_error").css("display", "inline");
					$('#btnSubmitCheckOut').removeAttr('disabled');
				}
				
	
			});				
	});
});